{"_id":"watlas","_rev":"4-c58d53fec119faa2abe45f21f8032669","name":"watlas","dist-tags":{"latest":"1.0.1"},"versions":{"0.9.0":{"name":"watlas","version":"0.9.0","author":{"name":"Brandon Jones","email":"tojiro@gmail.com"},"license":"MIT","_id":"watlas@0.9.0","maintainers":[{"name":"toji","email":"tojiro@gmail.com"}],"homepage":"https://github.com/toji/watlas#readme","bugs":{"url":"https://github.com/toji/watlas/issues"},"dist":{"shasum":"60f1a56c8c148bd2df9bb6eeb33701f1e2231a5c","tarball":"https://registry.npmjs.org/watlas/-/watlas-0.9.0.tgz","fileCount":6,"integrity":"sha512-10wl7DoBqRhFTYJ8xdkU00orh8KAdmPTnxFlXDXQQzo84VUvpkRU9LhhsZktjA5yEJ4ARt+4EG0ZyXB+RgJsqg==","signatures":[{"sig":"MEUCIQCbWiazTThZZW2Lv/nlWvty/XwPXkCZAsOPcfdN0npobgIgK4oN7i2yWvy+H7enXyb8CsOxnoyM54yEkVNt6rQBPQ0=","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":885569},"main":"dist/watlas.js","types":"./dist/watlas.d.ts","gitHead":"dde6293c2b6e66b6678526cac2b7878c905f7e7d","scripts":{"test":"vitest run","build":"./build-web.sh"},"_npmUser":{"name":"toji","email":"tojiro@gmail.com"},"repository":{"url":"git+https://github.com/toji/watlas.git","type":"git"},"_npmVersion":"10.8.2","description":"[![Actions Status](https://github.com/toji/watlas/workflows/build/badge.svg)](https://github.com/toji/watlas/actions) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)","directories":{},"_nodeVersion":"20.18.0","_hasShrinkwrap":false,"devDependencies":{"three":"^0.176.0","vitest":"^3.1.4"},"_npmOperationalInternal":{"tmp":"tmp/watlas_0.9.0_1748801374429_0.3206031230365378","host":"s3://npm-registry-packages-npm-production"}},"0.9.1":{"name":"watlas","version":"0.9.1","author":{"name":"Brandon Jones","email":"tojiro@gmail.com"},"license":"MIT","_id":"watlas@0.9.1","maintainers":[{"name":"toji","email":"tojiro@gmail.com"}],"homepage":"https://github.com/toji/watlas#readme","bugs":{"url":"https://github.com/toji/watlas/issues"},"dist":{"shasum":"29a4fbc45527459293a71d717276a2fa195a81a3","tarball":"https://registry.npmjs.org/watlas/-/watlas-0.9.1.tgz","fileCount":6,"integrity":"sha512-dGe9sclUPp6lbTZP5/yYi1smIdz+4sPJoEMSQYq51ohJNcnBfIXO5QveW4A1G0pSvGdh69A/ZyJo/yH2rm8sbg==","signatures":[{"sig":"MEUCIQDfx9/j9Ubw9Ej84wOr/4qnmO2IPj7q6aVWi3Lce37hDAIgDOkBv2YipHzTtUcXTRENwljv4tzGP5fsiVpwsE5RVVs=","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":325628},"main":"dist/watlas.js","types":"./dist/watlas.d.ts","gitHead":"2ff42f64c3501e662dfcf48650e7d693785efbc2","scripts":{"test":"vitest run","build":"./build-web.sh"},"_npmUser":{"name":"toji","email":"tojiro@gmail.com"},"repository":{"url":"git+https://github.com/toji/watlas.git","type":"git"},"_npmVersion":"9.6.5","description":"[![Actions Status](https://github.com/toji/watlas/workflows/build/badge.svg)](https://github.com/toji/watlas/actions) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)","directories":{},"_nodeVersion":"20.19.2","_hasShrinkwrap":false,"devDependencies":{"three":"^0.176.0","vitest":"^3.1.4"},"_npmOperationalInternal":{"tmp":"tmp/watlas_0.9.1_1748883872088_0.3170172729705394","host":"s3://npm-registry-packages-npm-production"}},"1.0.0":{"name":"watlas","version":"1.0.0","author":{"name":"Brandon Jones","email":"tojiro@gmail.com"},"license":"MIT","_id":"watlas@1.0.0","maintainers":[{"name":"toji","email":"tojiro@gmail.com"}],"homepage":"https://github.com/toji/watlas#readme","bugs":{"url":"https://github.com/toji/watlas/issues"},"dist":{"shasum":"766dc7c49ad8bd20a7bf7869a0d2d51fdf6debf0","tarball":"https://registry.npmjs.org/watlas/-/watlas-1.0.0.tgz","fileCount":6,"integrity":"sha512-YX+dfSoN6UISLfaQ6SZpLupg0MFjMSZ60y8O0UVoFGLb7LPepcN5w+Cj48HayyeUDY3lePA9OJZUch6ylnYeUQ==","signatures":[{"sig":"MEUCIQDC38p07IeK12w4JuWiVsRBRS3jLkZlUTSlI00uJPlgbgIgBK1Ti8DoZcjMwgD9K9me8BPIdxfmtUSG2KAYm8ubKes=","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":326154},"main":"dist/watlas.js","type":"module","types":"./dist/watlas.d.ts","gitHead":"11838972708ff75b66938e63f850487b5228a05e","scripts":{"test":"vitest run","build":"./build-web.sh"},"_npmUser":{"name":"toji","email":"tojiro@gmail.com"},"repository":{"url":"git+https://github.com/toji/watlas.git","type":"git"},"_npmVersion":"10.8.2","description":"[![Build Status](https://github.com/toji/watlas/actions/workflows/build.yml/badge.svg)](https://github.com/toji/watlas/actions/workflows/build.yml) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)","directories":{},"_nodeVersion":"20.18.0","_hasShrinkwrap":false,"devDependencies":{"three":"^0.176.0","vitest":"^3.1.4"},"_npmOperationalInternal":{"tmp":"tmp/watlas_1.0.0_1748967813057_0.3570650704648264","host":"s3://npm-registry-packages-npm-production"}},"1.0.1":{"name":"watlas","version":"1.0.1","repository":{"type":"git","url":"git+https://github.com/toji/watlas.git"},"author":{"name":"Brandon Jones","email":"tojiro@gmail.com"},"license":"MIT","type":"module","main":"dist/watlas.js","scripts":{"build":"./build-web.sh","test":"vitest run"},"devDependencies":{"three":"^0.176.0","vitest":"^3.1.4"},"_id":"watlas@1.0.1","gitHead":"9a8f004c1053145e97b2c489fc73a37fe48a44a7","types":"./dist/watlas.d.ts","description":"[![Build Status](https://github.com/toji/watlas/actions/workflows/build.yml/badge.svg)](https://github.com/toji/watlas/actions/workflows/build.yml) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)","bugs":{"url":"https://github.com/toji/watlas/issues"},"homepage":"https://github.com/toji/watlas#readme","_nodeVersion":"20.18.0","_npmVersion":"10.8.2","dist":{"integrity":"sha512-TmB++BFqEQY19cPNby5iszACZd8t6uauB7YdObkqhWarhed79OMPS8wufoDSo0p85A/8QW/aqZwEJf+nD4emSw==","shasum":"a91fd62f4a2efac1f96f71b17397531c2235d240","tarball":"https://registry.npmjs.org/watlas/-/watlas-1.0.1.tgz","fileCount":6,"unpackedSize":326163,"signatures":[{"keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U","sig":"MEUCIQDtvhosVE2AFmVDK7wukdFvcE6MWmkjcSaKkBVw6c6sbAIgWMyc4wr170WZ6PuVJgHC38FIttcdCZfvDqHJySznM/8="}]},"_npmUser":{"name":"toji","email":"tojiro@gmail.com","actor":{"name":"toji","email":"tojiro@gmail.com","type":"user"}},"directories":{},"maintainers":[{"name":"toji","email":"tojiro@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages-npm-production","tmp":"tmp/watlas_1.0.1_1751569749870_0.8260721328542264"},"_hasShrinkwrap":false}},"time":{"created":"2025-06-01T18:09:34.381Z","modified":"2025-07-03T19:09:10.304Z","0.9.0":"2025-06-01T18:09:34.653Z","0.9.1":"2025-06-02T17:04:32.265Z","1.0.0":"2025-06-03T16:23:33.261Z","1.0.1":"2025-07-03T19:09:10.124Z"},"bugs":{"url":"https://github.com/toji/watlas/issues"},"author":{"name":"Brandon Jones","email":"tojiro@gmail.com"},"license":"MIT","homepage":"https://github.com/toji/watlas#readme","repository":{"type":"git","url":"git+https://github.com/toji/watlas.git"},"description":"[![Build Status](https://github.com/toji/watlas/actions/workflows/build.yml/badge.svg)](https://github.com/toji/watlas/actions/workflows/build.yml) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)","maintainers":[{"name":"toji","email":"tojiro@gmail.com"}],"readme":"## watlas\n\n[![Build Status](https://github.com/toji/watlas/actions/workflows/build.yml/badge.svg)](https://github.com/toji/watlas/actions/workflows/build.yml) [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n\nwatlas is a WebAssembly wrapper for [xatlas](https://github.com/jpcy/xatlas), making is accessible to JavaScript in browsers and node.js. The primary difference between this as and other JS wrappers like [xatlas.js](https://github.com/repalash/xatlas.js) is that this wrapper attempts to expose the native API as closely as possible. This makes it potentially harder to use compared to xatlas.js for simple cases but should be more flexible for a wider range of uses.\n\nThis wrapper was written with the intent to be used by [gltf-transform](https://gltf-transform.dev/)\n\n### Why the name watlas?\n\nBecause the much better name of xatlas.js was already taken. :)\n\nThe \"w\" in this case stands for \"web\", and happens to be right next to \"x\" in the (english) alphabet.\n\n### Library Use\n\n#### Initialization\n\nYou can install it locally via npm and import for node_modules\n\n```\n# Command Line\n$> npm install watlas\n```\n\n```js\nimport * as watlas from 'watlas' // For node.js\n\nimport * as watlas from '../node_modules/watlas/dist/watlas.js' // For the browser\n```\n\nOr import the library from a CDN:\n\n```js\n// Import from a CDN\nimport * as watlas from 'https://cdn.jsdelivr.net/npm/watlas'\n```\n\nWhichever way you import it, to begin using the library you need to call `watlas.Initialize()` and\nwait on the returned promise before making any other WAtlas calls.\n\n```js\n// IMPORANT! Initialize the WASM module prior to calling any API methods.\nawait watlas.Initialize();\n```\n\n#### Simple use\n\n```js\n// Create an empty atlas\nconst atlas = new watlas.Atlas();\n\n// Load your mesh data into Typed Arrays\nconst positions = new Float32Array([ /*...*/ ]);\nconst indices = new Uint16Array([ /*...*/ ]);\n\n// Add one or more meshes\natlas.addMesh({\n  vertexPositionData: positions,\n  vertexCount: 256,\n  vertexPositionStride: 12, // In bytes\n  indexData: indices, // Index format will be determined by Typed Array type\n  indexCount: 512,\n});\n\n// Call generate on the atlas\natlas.generate(\n  {}, // Chart options\n  {}  // Pack options\n);\n\n// Packed atlas data is not available on the atlas object.\n// See below for how to interpret results\nconsole.log(`Atlas size: (${atlas.width}, ${atlas.height})`);\n\n// When finished, manually delete the atlas\natlas.delete();\n```\n\n#### Tools/Editor integration\n\n```js\n// Add one or more meshes\natlas.addMesh({\n\n});\n\n// computeCharts segments meshes into charts and parameterize\natlas.computeCharts({\n  maxChartArea: 256\n});\n\n// packCharts packs charts into one or more atlases. Can call multiple times\n// to tweak options like texel scale and resolution\natlas.packCharts({\n  padding: 1,\n  bilinear: false,\n});\n```\n\n#### Pack multiple atlases into a single atlas\n\n```js\n// Add one or more UV meshes\natlas.addUvMesh({\n\n});\n\n// Call packCharts\natlas.packCharts({\n  padding: 1,\n  bilinear: false,\n});\n```\n\n#### Using Results\n\n```js\n// Loop through each mesh that was part of the atlas.\n// (Returned in the order that they were added to the atlas)\nfor (let i = 0; i < atlas.meshCount; ++i) {\n  const mesh = atlas.getMesh(i);\n\n  // Allocate a large enough Uint32Array to hold the updated indicies.\n  const indices = new Uint32Array(mesh.indexCount);\n  mesh.getIndexArray(indices); // Populates indices with the updated mesh index data\n\n  for (let j = 0; j < mesh.vertexCount; ++j) {\n    const vertex = mesh.getVertex(j);\n    // UVs are returned in texels, and will need to be normalized for most use cases.\n    const u = vertex.uv[0] / atlas.width;\n    const v = vertex.uv[1] / atlas.height;\n\n    // xref gives the original vertex index associated with this new vertex.\n    // Copy the attributes from the original mesh at that index.\n    emitVertex(positions[vertex.xref], normals[vertex.xref], [u, v]);\n  }\n}\n```\n\n### Building\n\nFirst, make sure [emscripten is installed](https://emscripten.org/docs/getting_started/downloads.html). watlas requires emscripten 4.0.9 or greater to support `std::optional` fields.\n\nAlso ensure that npm is installed, which is packaged with [node.js](https://nodejs.org/en)\n\nThen run:\n\n```\nnpm install\nnpm run build\n```\n\nThis should produce `watlas.js`, `watlas.wasm`, and `watlas.d.ts` in the `dist\\` folder.\n\n> **Note for WSL users**\n>\n> If you are building via Windows Subsystem for Linux (WSL) you may run into the following error message while building:\n> ```\n> error while loading shared libraries: libatomic.so.1: cannot open shared object file: No such file or directory\n> ```\n> This can be resolved by running `apt install libatomic1` to install the missing library\n\n### Testing\n\nAfter building, you can run the test suite by calling\n\n```\nnpm run test\n```\n\n## About xatlas\n\nxatlas is a small C++11 library with no external dependencies that generates unique texture coordinates suitable for baking lightmaps or texture painting.\n\nIt is an independent fork of [thekla_atlas](https://github.com/Thekla/thekla_atlas), used by [The Witness](https://en.wikipedia.org/wiki/The_Witness_(2016_video_game)).\n\nSee the [xatlas GitHub](https://github.com/jpcy/xatlas) for more details.\n","readmeFilename":"README.md"}